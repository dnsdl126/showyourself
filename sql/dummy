-- 회원 테이블 
DROP TABLE tbl_member;
CREATE TABLE tbl_member(
 mno NUMBER PRIMARY KEY, --회원번호
 id VARCHAR2(100) NOT NULL, -- 아이디
 pw VARCHAR2(100) NOT NULL, -- 비밀번호
 checkpw VARCHAR2(300) NOT NULL,-- 비밀번호 재확인 
 email VARCHAR2(500) NOT NULL, -- 이메일
 name VARCHAR2(500) NOT NULL, -- 이름
 phone VARCHAR2(700) NOT NULL, -- 연락처
 postcode VARCHAR2(30) NOT NULL, -- 우편번호
 addr1 VARCHAR2(300) NOT NULL, -- 주소
 addr2 VARCHAR2(300) NOT NULL, -- 상세 주소
 useon VARCHAR2(20) DEFAULT 'false', -- 정보동의 1
 primaryon VARCHAR2(20)  DEFAULT 'false', -- 정보동의 2
 locon VARCHAR2(20) DEFAULT 'false', -- 정보동의 
 propic VARCHAR2(1000) NOT NULL, -- 프로필 사진 
 procoment VARCHAR2(1000) NOT NULL, -- 자기소개 
 regdate DATE DEFAULT SYSDATE,
 seller VARCHAR2(20) DEFAULT 'N' -- 작가여부
	   
);

DROP SEQUENCE seq_member;
CREATE SEQUENCE seq_member
  start WITH 1
  INCREMENT BY 1
  NOCYCLE;


--상품등록테이블
DROP SEQUENCE seq_product;
CREATE SEQUENCE seq_product
    START WITH 1
    INCREMENT BY 1
    NOCYCLE;

DROP TABLE tbl_product;
CREATE TABLE tbl_product(
    pno NUMBER PRIMARY KEY,              -- 상품번호
    title VARCHAR2(200) NOT NULL,        -- 제목
    classonoff VARCHAR2(200) NOT NULL,   -- 온,오프라인
    category VARCHAR2(100) NOT NULL,     -- 카테고리(소분류)
    plevel VARCHAR2(100) NOT NULL,       -- 난이도
    content VARCHAR2(4000) NOT NULL,     -- 소개
    selprice NUMBER DEFAULT 0,           -- 할인가
    price NUMBER DEFAULT 0,              -- 정가
    tag VARCHAR2(100) NOT NULL,          -- 태그
    regdate DATE DEFAULT SYSDATE
);


--상품첨부파일등록테이블
DROP TABLE tbl_mainpic CASCADE CONRTRAINTS;
CREATE TABLE tbl_mainpic(
    fullname VARCHAR2(150) NOT NULL,      -- 대표사진
    bno NUMBER NOT NULL,
    regdate DATE DEFAULT SYSDATE    
);

ALTER TABLE tbl_mainpic ADD CONSTRAINT pk_mainpic
PRIMARY KEY(fullname);

ALTER TABLE tbl_mainpic
ADD CONSTRAINT fk_mainpic_bno
FOREIGN KEY(bno) REFERENCES tbl_product(pno)
ON DELETE CASCADE;


--커리큘럼 테이블(혜원)

--showyourself 테이블 목록 사진, 순서, 내용, 태그


DROP TABLE tbl_curri CASCADE CONSTRAINTS;
CREATE TABLE tbl_curri(
    pno NUMBER,
    ctitle VARCHAR(300) NOT NULL,
    c_content VARCHAR2(4000) NOT NULL,
    cimg VARCHAR2(300) NOT NULL
);

INSERT INTO tbl_curri (pno, ctitle, c_content, cimg)
VALUES(1,'썬데이스카의 가죽공예 프롤로그', '안녕하세요! 썬데이스카의 가죽 클래스를 소개합니다.','${path}/resources/img/banner13.jpg');
INSERT INTO tbl_curri (pno, ctitle, c_content, cimg)
VALUES(1, '재료와 도구', '공예의 기본, 재료와 도구에 대해 알아볼까요?','${path}/resources/img/banner14.jpg');
INSERT INTO tbl_curri (pno, ctitle, c_content, cimg)
VALUES(1,'연습작품: 책갈피 만들기', '첫 작품 책갈피를 만들면서 기본적인 가죽공예를 익혀보아요.','${path}/resources/img/banner15.jpg');
INSERT INTO tbl_curri (pno, ctitle, c_content, cimg)
VALUES(1, '카드지갑 만들기', '이제 직접 카드지갑을 만들어 볼까요?','${path}/resources/img/banner16.jpg');

select * from tbl_curri;


--스케줄 테이블 (시윤)
DROP TABLE tbl_schedule;
CREATE TABLE tbl_schedule(  
    startdate VARCHAR(50) NOT NULL, --시작 일자
    enddate VARCHAR(50) NOT NULL,   --끝나는 일자
    day VARCHAR(50) NOT NULL,       -- 요일
    starttime VARCHAR(50) NOT NULL, -- 시작 시간
    endtime VARCHAR(50) NOT NULL,   -- 끝나는 시간
    avalmincnt NUMBER NOT NULL, -- 최소 참여가능인원  
    avalmaxcnt NUMBER NOT NULL, -- 최대 참여가능인원
    deadlinetime NUMBER NOT NULL --신청마감시간    
);

